<div class="max-w-md mx-auto bg-white shadow-md rounded-lg p-6">
  <%= form_with model: [@event, @booking], local: true do |form| %>
    <% if @booking.errors.any? %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <strong>Errors:</strong>
        <ul>
          <% @booking.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- Step 1: Customer Information -->
    <div class="mb-6 pb-6 border-b border-gray-300">
      <h3 class="text-lg font-bold text-gray-800 mb-4">Customer Information</h3>
      
      <div class="mb-4">
        <%= form.label :name, "Customer Name", class: "block text-gray-700 font-bold mb-2" %>
        <%= form.text_field :name, class: "form-control", placeholder: "Enter customer name" %>
      </div>

      <div class="mb-4">
        <%= form.label :email_address, "Email Address", class: "block text-gray-700 font-bold mb-2" %>
        <%= form.email_field :email_address, class: "form-control", placeholder: "customer@example.com" %>
      </div>

      <div class="mb-4">
        <%= form.label :phone_number, "Phone Number", class: "block text-gray-700 font-bold mb-2" %>
        <%= form.text_field :phone_number, class: "form-control", placeholder: "Enter phone number" %>
      </div>
    </div>

    <!-- Step 2: Ticket Selection -->
    <div class="mb-6">
      <h3 class="text-lg font-bold text-gray-800 mb-4">Ticket Selection</h3>
      
      <div class="mb-4">
        <%= form.label :ticket_type_id, "Select Ticket Type", class: "block text-gray-700 font-bold mb-2" %>
        <%= form.collection_select :ticket_type_id, @event.ticket_types, :id, 
            ->(tt) { "#{tt.name} - #{number_to_currency(tt.price)} (#{tt.available_tickets} available)" }, 
            { prompt: "Choose ticket type" }, 
            class: "form-control" %>
      </div>

      <div class="mb-4">
        <%= form.label :tickets, "Number of Tickets", class: "block text-gray-700 font-bold mb-2" %>
        <%= form.number_field :tickets, min: 1, class: "form-control", placeholder: "Enter number of tickets" %>
      </div>
    </div>

    <div>
      <%= form.submit "Proceed to Payment", class: "btn btn-primary w-full" %>
    </div>
  <% end %>
</div>