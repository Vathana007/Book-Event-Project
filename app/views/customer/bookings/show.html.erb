<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card card-primary card-outline shadow-lg">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start mb-4">
            <div>
              <h1 class="h4 font-weight-bold text-dark mb-1">Booking #<%= @booking.id %></h1>
              <p class="text-muted mb-0">Created: <%= @booking.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
            </div>
            <div>
              <% case @booking.status %>
              <% when "confirmed" %>
                <span class="badge badge-success px-3 py-2 font-weight-bold">✓ Confirmed</span>
              <% when "pending" %>
                <span class="badge badge-warning px-3 py-2 font-weight-bold">⏳ Pending Payment</span>
              <% when "cancelled" %>
                <span class="badge badge-danger px-3 py-2 font-weight-bold">✗ Cancelled</span>
              <% end %>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6 mb-3">
              <div class="bg-light rounded p-3 h-100">
                <h5 class="font-weight-bold text-dark mb-3">Event Information</h5>
                <p class="mb-2"><strong>Event:</strong> <%= @booking.event.title %></p>
                <p class="mb-2"><strong>Location:</strong> <%= @booking.event.location %></p>
                <p class="mb-2"><strong>Date:</strong> <%= @booking.event.start_time.strftime("%B %d, %Y at %I:%M %p") %></p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="bg-light rounded p-3 h-100">
                <h5 class="font-weight-bold text-dark mb-3">Customer Information</h5>
                <p class="mb-2"><strong>Name:</strong> <%= @booking.name %></p>
                <p class="mb-2"><strong>Email:</strong> <%= @booking.email_address %></p>
                <p class="mb-2"><strong>Phone:</strong> <%= @booking.phone_number || "Not provided" %></p>
              </div>
            </div>
          </div>

          <div class="bg-primary bg-opacity-10 rounded p-3 mb-4">
            <h5 class="font-weight-bold text-dark mb-3">Ticket Details</h5>
            <div class="row">
              <div class="col-6"><strong>Ticket Type:</strong></div>
              <div class="col-6"><%= @booking.ticket_type.name %></div>
              <div class="col-6"><strong>Number of Tickets:</strong></div>
              <div class="col-6"><%= @booking.tickets %></div>
              <div class="col-6"><strong>Price per Ticket:</strong></div>
              <div class="col-6"><%= number_to_currency(@booking.ticket_type.price) %></div>
              <div class="col-12"><hr></div>
              <div class="col-6 font-weight-bold text-dark">Total Amount:</div>
              <div class="col-6 font-weight-bold"><%= number_to_currency(@booking.total_price) %></div>
            </div>
          </div>

          <% if @booking.payment %>
            <div class="bg-success bg-opacity-10 rounded p-3 mb-4">
              <h5 class="font-weight-bold text-dark mb-3">Payment Information</h5>
              <p class="mb-2"><strong>Payment Method:</strong> <%= @booking.payment.payment_method.titleize %></p>
              <p class="mb-2"><strong>Transaction Reference:</strong> <%= @booking.payment.transaction_ref %></p>
              <p class="mb-2"><strong>Payment Status:</strong> <span class="badge badge-primary"><%= @booking.payment.status.titleize %></span></p>
              <p class="mb-2"><strong>Payment Date:</strong> <%= @booking.payment.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
            </div>
          <% elsif @booking.status == "pending" %>
            <div class="alert alert-warning mb-4">
              <i class="fas fa-exclamation-triangle mr-2"></i>
              This booking is pending payment. Please complete payment to confirm your booking.
              <div class="mt-3">
                <%= link_to "Complete Payment", new_booking_payment_path(@booking), class: "btn btn-warning" %>
              </div>
            </div>
          <% end %>

          <div class="d-flex gap-2 mt-4">
            <%= link_to "← Back to My Bookings", customer_bookings_path, class: "btn btn-secondary" %>
            <%= link_to "Download PDF", customer_booking_path(@booking, format: :pdf), class: "btn btn-primary", target: "_blank" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>