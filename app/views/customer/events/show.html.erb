<!-- filepath: /home/chort-sereivathana/Documents/book-event-project/event-booking/app/views/customer/events/show.html.erb -->
<div class="container mx-auto px-4 py-8">
  <div class="bg-white shadow-lg rounded-lg p-8">
    <% if @event.image&.attached? %>
      <%= image_tag @event.image, class: "w-full h-64 object-cover mb-6 rounded" %>
    <% end %>
    <h1 class="text-3xl font-bold text-gray-800 mb-4"><%= @event.title %></h1>
    <p class="text-gray-600 mb-2"><i class="fas fa-calendar-alt mr-1"></i> <%= @event.start_time.strftime("%B %d, %Y at %I:%M %p") %></p>
    <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt mr-1"></i> <%= @event.location %></p>
    <p class="text-gray-700 mb-4"><%= @event.description %></p>

    <h2 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Ticket Types</h2>
    <% if @ticket_types.any? %>
      <table class="min-w-full mb-4">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-600">Type</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-600">Price</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-600">Available</th>
          </tr>
        </thead>
        <tbody>
          <% @ticket_types.each do |tt| %>
            <tr>
              <td class="px-4 py-2"><%= tt.name %></td>
              <td class="px-4 py-2"><%= number_to_currency(tt.price) %></td>
              <td class="px-4 py-2"><%= tt.available_tickets %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="text-gray-500">No ticket types available for this event.</p>
    <% end %>

    <div class="mt-6">
      <% if @event.available_tickets > 0 %>
        <%= link_to "Book Now", new_event_booking_path(@event), class: "btn btn-primary" %>
      <% else %>
        <span class="inline-block px-4 py-2 bg-gray-300 text-gray-600 rounded font-semibold cursor-not-allowed">Sold Out</span>
      <% end %>
    </div>
    <div class="mt-4">
      <%= link_to "Back to Events", customer_events_path, class: "text-blue-600 hover:underline" %>
    </div>
  </div>
</div>